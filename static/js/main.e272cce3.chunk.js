(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1000:function(e,t,n){},1003:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(27),o=n(472),c=n(24),s=n(25),u=n(30),l=n(29),p=n(31),d=n(58),f=n(118),h=n(1011),m=n(1012),v=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.createElement("div",null,this.props.children)}}]),t}(r.Component),g=n(10),b=n(33),y=n(13),x=n(12),O=n(9),E=n.n(O),C=n(47),j=n(1013),k=n(1006),S=n(1007),w=n(15),T=n(67),D={connectionLineContainer:{display:"flex",height:"100%",left:{display:"flex",flexDirection:"column",flex:2},right:{display:"flex",flexDirection:"column",flex:5}},lineComponent:{flex:1,display:"flex",flexDirection:"row",space:{flex:1}},stationComponent:{middle:{display:"flex",flex:"1",alignItems:"center",justifyContent:"center"}}},L=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).lineWidth=n.props.lineWidth||6,n.stationPointWidth=n.props.stationPointWidth||24,n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"lineComponent",value:function(e){var t={flex:"0 0 ".concat(this.lineWidth,"px"),background:e};return a.a.createElement("div",{style:D.lineComponent},a.a.createElement("div",{style:D.lineComponent.space}),a.a.createElement("div",{style:t}),a.a.createElement("div",{style:D.lineComponent.space}))}},{key:"stationComponent",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var t={flex:"0 0 ".concat(this.stationPointWidth,"px"),display:"flex",justifyContent:"center",alignItems:"center"},n={background:"transparent",minHeight:this.stationPointWidth,minWidth:this.stationPointWidth,maxHeight:this.stationPointWidth,maxWidth:this.stationPointWidth,borderRadius:this.stationPointWidth/2,border:"".concat(this.lineWidth,"px solid ").concat(e)};return a.a.createElement("div",{style:t},a.a.createElement("div",{style:n}))}},{key:"render",value:function(){var e=this,t=this.props.connection;return t&&t.connectionPartList&&t.connectionPartList.length?a.a.createElement("div",{style:D.connectionLineContainer},a.a.createElement("div",{style:D.connectionLineContainer.left},w.flattenList(t.connectionPartList.map(function(n,r){var a=w.getColor(n.label),i=r==t.connectionPartList.length-1?null:w.getColor(t.connectionPartList[r+1].label);return 0==r?[e.stationComponent(a,null,a),e.lineComponent(a),e.stationComponent(a,a,i)]:r!=t.connectionPartList.length-1?[e.lineComponent(a),e.stationComponent(a,a,i)]:[e.lineComponent(a),e.stationComponent(a,a,null)]}))),a.a.createElement("div",{style:D.connectionLineContainer.right},w.flattenList(t.connectionPartList.map(function(n,r){var i=w.getColor(n.label),o=n.label?a.a.createElement(T.a,{backgroundColor:i,line:n.label}):null,c={flex:"0 0 ".concat(e.stationPointWidth,"px"),display:"flex",time:{flex:1,display:"flex",flexDirection:"column"},stationName:{flex:3}},s=[a.a.createElement("div",{style:c},a.a.createElement("div",{style:c.time},a.a.createElement("b",null,w.unixTimeStampToDateHHMM(n.departure)),r>0&&a.a.createElement("div",{className:"text-danger"},"(",a.a.createElement("span",{className:"glyphicon glyphicon-time","aria-hidden":"true"}),w.timeDifferenceFormatString(t.connectionPartList[r-1].arrival,n.departure),")")),a.a.createElement("div",{style:c.stationName},n.from.name)),a.a.createElement("div",{style:{flex:"1",display:"flex",alignItems:"center"}},o||a.a.createElement("span",{className:"glyphicon glyphicon-piggy-bank","aria-hidden":"true"}),n.destination||"Walking",!o&&a.a.createElement("div",{className:"text-info"},"(",w.timeDifferenceFormatString(n.departure,n.arrival),")"))];return r!=t.connectionPartList.length-1?s:[].concat(s,[a.a.createElement("div",{style:c},a.a.createElement("div",{style:c.time},w.unixTimeStampToDateHHMM(n.arrival)),a.a.createElement("div",{style:c.stationName},n.to.name))])})))):null}}]),t}(a.a.Component),I=n(321),_=n.n(I),N=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).renderSuggestion=function(e){return w.getStationOverviewComponent(e)},n.getSuggestionValue=function(e){return e.id},n.onSuggestionsClearRequested=function(){n.setState({suggestions:[]})},n.onChange=function(e,t){var r=t.newValue,a=t.method;if(-1=="up,down".split(",").indexOf(a))if(-1!="click,enter".split(",").indexOf(a)){var i=n.getStationObjFromName(r);i&&n.props.onSelect(i)}else null==n.props.value?n.setState({value:r}):n.props.onChange&&n.props.onChange({value:r,suggestions:n.state.suggestions})},n.onSuggestionsFetchRequested=function(e){var t=e.value.trim().toLowerCase();if(0==t.length)return[];var r=n.props.stations.map(function(e){return Object(g.a)({},e,{name:e.name.trim().toLowerCase()})}).map(function(e){return Object(g.a)({},e,{order:e.name.indexOf(t)})}).filter(function(e){return-1!=e.order}).sort(function(e,t){return e.order-t.order}).slice(0,15);n.setState({suggestions:r})},n.state={value:"",suggestions:[]},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getStationObjFromName",value:function(e){var t=this.props.stations.find(function(t){return t.id==e});if(t)return t}},{key:"onSuggestionHighlighted",value:function(e){var t=e.suggestion;this.props.onChange&&this.props.value&&t&&this.props.onChange({value:this.props.value,suggestions:[t]})}},{key:"render",value:function(){var e=this.state,t=e.value;e.suggestions;this.props.value&&(t=this.props.value);var n={placeholder:"Give a station name",value:t,onChange:this.onChange,onBlur:this.onBlur};return a.a.createElement(_.a,{suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested.bind(this),onSuggestionsClearRequested:this.onSuggestionsClearRequested.bind(this),onSuggestionHighlighted:this.onSuggestionHighlighted.bind(this),getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:n,theme:x.a.destinationCard.input})}}]),t}(a.a.Component),R=n(69);var M=Object(d.b)(function(e){return Object(g.a)({},e.mvg,e.location)},function(e){return{}})(N),P=n(478),A=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getMainIconElement",value:function(){return"loading"==this.props.overlayType?a.a.createElement(P.DotLoader,{color:"#ffffff",loading:!0}):a.a.createElement("p",null," Error! ")}},{key:"render",value:function(){return a.a.createElement("div",{style:x.a.loadingOverlayStyle},a.a.createElement("div",{style:x.a.loadingOverlayStyle.spinnerContainer},this.getMainIconElement()),a.a.createElement("p",null,this.props.title))}}]),t}(a.a.Component),F=n(187),H=n(480),B=n.n(H),U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={defaultLocation:null,stationChosen:null,mapCenter:e.closestStations&&n.getStationLocation(e.closestStations[0]),displayMarker:[],connectionIndex:0,numDisplayConnection:5,value:""},n.apiInstance=new F.a,n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getStationLocation",value:function(e){return w.getStationLatLng(e)}},{key:"onStationChosen",value:function(e){this.setState(Object(g.a)({},this.state,{stationChosen:e,value:w.getStationName(e),mapCenter:this.getStationLocation(e)}))}},{key:"setLocation",value:function(){if(this.state.stationChosen){var e=this.state.stationChosen,t=e.latitude,n=e.longitude;this.props.setLocation(t,n)}}},{key:"onMapMoveEnd",value:function(){var e=Object(C.a)(E.a.mark(function e(t,n){var r,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.center,e.next=3,this.apiInstance.getClosestStations(r[0],r[1],this.props.stations,15);case 3:a=e.sent,this.setState(Object(g.a)({},this.state,{displayMarker:a}));case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMap",value:function(){var e=this;return a.a.createElement(j.a,{zoomControl:!1,onViewportChanged:this.onMapMoveEnd.bind(this),center:this.state.mapCenter,zoom:11,style:{height:"60vh"}},w.getMapTileLayer(),this.state.displayMarker.map(function(t){return a.a.createElement(k.a,{key:t.id,onClick:function(){return e.onStationChosen(t)},position:e.getStationLocation(t)},a.a.createElement(S.a,{permanent:!0},a.a.createElement("div",null,w.getStationOverviewComponent(t))))}))}},{key:"setConnectionIndex",value:function(e){this.setState(Object(g.a)({},this.state,{connectionIndex:e}))}},{key:"onInputFieldChange",value:function(e){this.setState({value:e.value,mapCenter:e.suggestions.length&&this.getStationLocation(e.suggestions[0])})}},{key:"getStationDistanceToLocation",value:function(e){var t=this.props.closestStations[0];return t?w.getDistanceFromLatLonInKm(t.latitude,t.longitude,e.latitude,e.longitude).toFixed(2):0}},{key:"getConnectionAttributeComponent",value:function(e,t,n){var r=function(e){return a.a.createElement("div",{className:e.className,style:Object(g.a)({},e.style,{display:"flex",flexDirection:"column",textAlign:"center"})},a.a.createElement("div",{style:{flex:1}},a.a.createElement("span",{className:"glyphicon glyphicon-".concat(e.icon),"aria-hidden":"true"})," ",e.title),a.a.createElement("div",{style:{flex:1}},e.val),e.subval&&a.a.createElement("div",{style:{flex:1},className:"text-danger"},e.subval))},i=w.unixTimeStampToDateHHMM(e.departure),o=w.timeDifferenceFormatString(e.departure,e.arrival),c=w.unixTimeStampToDateHHMM(e.arrival),s=(w.unixTimeStampToDateHHMM(t.departure),w.timeDifferenceFormatString(t.departure,e.departure,!0)),u=(w.timeDifferenceFormatString(t.departure,t.arrival),w.unixTimeStampToDateHHMM(t.departure),w.timeDifferenceFormatString(t.arrival,e.arrival,!0));return a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(r,{style:{flex:1,borderRight:"1px solid white"},title:"Departure",val:i,subval:!n&&"(".concat(s,")"),icon:"time"}),a.a.createElement(r,{style:{flex:1,borderLeft:"1px solid white"},title:"Total time",val:o,icon:"transfer"}),a.a.createElement(r,{style:{flex:1},className:"bg-info",title:"Arrival",val:c,subval:!n&&"(".concat(u,")"),icon:"flag"}))}},{key:"destinationDetailComponent",value:function(){var e=this,t=this.props.destinationDetail,n=this.props.connections[t.id],r=function(e){return a.a.createElement("div",{style:Object(g.a)({},e.style,{display:"flex"}),onClick:e.onClick},a.a.createElement("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"}},w.unixTimeStampToDateHHMM(e.connection.departure)),a.a.createElement("div",{style:{flex:2,display:"flex",alignItems:"center",flexWrap:"wrap"}},w.getConnectionDisplayComponents(e.connection)))};return a.a.createElement(y.k,{show:!0,bsSize:"lg",onHide:this.props.onHide},a.a.createElement(y.k.Header,{closeButton:!0},"Connections to ",t.name),n?a.a.createElement(y.k.Body,null,a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("div",{style:{flex:1,display:"flex"}},a.a.createElement("div",{style:{flex:1}}," ",a.a.createElement("div",{style:{flex:1,display:"block",flexWrap:"wrap"}},a.a.createElement("h2",{style:{marginTop:0}},t.name," ")),a.a.createElement("div",{style:{flex:1,display:"flex",flexWrap:"wrap"}},a.a.createElement("div",null,a.a.createElement("span",{className:"glyphicon glyphicon-map-marker","aria-hidden":"true"}),this.getStationDistanceToLocation(t),"km |"),w.getStationProductLineTags(t))),a.a.createElement("div",{style:{flex:1}}," ",this.getConnectionAttributeComponent(n[this.state.connectionIndex],n[0],0==this.state.connectionIndex))),a.a.createElement("div",{style:{flex:1,display:"flex",minHeight:"50vh"}},a.a.createElement("div",{style:{flex:2}},n.map(function(t,n){return a.a.createElement(r,{onClick:e.setConnectionIndex.bind(e,n),style:n==e.state.connectionIndex?{background:"rgba(255,255,255,0.5)"}:{},connection:t})})),a.a.createElement("div",{style:{flex:3}},a.a.createElement(L,{connection:n[this.state.connectionIndex]}))))):a.a.createElement(A,{title:"Fail to fetch connection..."}))}},{key:"departureQRComponent",value:function(){return a.a.createElement(y.k,{show:!0,bsSize:"large",onHide:this.props.onHide},a.a.createElement(y.k.Header,{closeButton:!0},a.a.createElement(y.k.Title,null," QR Code for this departure ")),a.a.createElement(y.k.Body,null,a.a.createElement(B.a,{size:Math.round(.8*window.innerHeight),value:this.props.departureQR})))}},{key:"render",value:function(){return this.props.destinationDetail?this.destinationDetailComponent():this.props.departureQR?this.departureQRComponent():a.a.createElement(y.k,{show:!0,bsSize:"large",onHide:this.props.onHide},a.a.createElement(y.k.Header,{closeButton:!0},a.a.createElement(y.k.Title,null," Choose your location ")),a.a.createElement(y.k.Body,null,a.a.createElement("div",{style:x.a.modal.container},a.a.createElement("div",{style:x.a.modal.inputField},a.a.createElement(y.f,null,a.a.createElement(y.g,null,a.a.createElement(y.d,null," Choose the station that is the closest to you:"),a.a.createElement(M,{value:this.state.value,onChange:this.onInputFieldChange.bind(this),onSelect:this.onStationChosen.bind(this)})))),a.a.createElement("div",{style:x.a.modal.map},this.getMap()))),a.a.createElement(y.k.Footer,null,a.a.createElement(y.a,{onClick:this.setLocation.bind(this),disabled:null==this.state.stationChosen,bsStyle:"success"}," Change Location ")))}}]),t}(a.a.Component),G=n(19);var W=Object(d.b)(function(e){return{closestStations:e.mvg.closest_stations,stations:e.mvg.stations,connections:e.mvg.connections,connectionLines:e.mvg.connectionLines,destinationDetail:e.destination.destinationDetail,departureQR:e.mvg.departureQR}},function(e){return{setLocation:function(t,n){return e({type:R.a,lat:t,lng:n})},clearDestinationDetail:function(){return e({type:G.m,destination:null})}}})(U),q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getIcon",value:function(){return this.props.glyphicon?a.a.createElement(y.h,{glyph:this.props.glyphicon}):null}},{key:"render",value:function(){return a.a.createElement("div",{onClick:this.props.onClick,style:Object(g.a)({},x.a.imageWithText,{opacity:this.props.opacity||1})},this.getIcon(),a.a.createElement("h4",null,this.props.text))}}]),t}(a.a.Component),V=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getDistance",value:function(){if(!this.props.station)return 0;var e=this.props.station,t=e.latitude,n=e.longitude,r=this.props,a=r.lat,i=r.lng;return w.getDistanceFromLatLonInKm(a,i,t,n).toPrecision(3)}},{key:"getTransportTypeToken",value:function(e){var t=w.getProductColorCode(e),n=w.getProductShortName(e);return a.a.createElement(T.a,{backgroundColor:t,line:n})}},{key:"render",value:function(){return a.a.createElement("div",{style:x.a.stationCard},a.a.createElement("div",{style:x.a.stationCard.leftContainer},a.a.createElement("h4",null," ",w.getStationName(this.props.station)," "),a.a.createElement("div",{style:x.a.stationCard.leftContainer.tokenList},this.props.station.products.map(this.getTransportTypeToken))),a.a.createElement("div",{style:x.a.stationCard.rightContainer},a.a.createElement("h6",null,this.getDistance(),"km")))}}]),t}(a.a.Component),z=n(89),K=n.n(z),Q=n(238),Y=n.n(Q),X=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"departureTime",value:function(){return w.unixTimeStampToDateHHMM(this.props.departure.departureTime)}},{key:"isGone",value:function(){return w.timeDifferenceToDateString(this.props.currentTime,this.props.departure.departureTime).hasPassed}},{key:"timeLeft",value:function(){if(this.isGone())return a.a.createElement("h6",{style:Object(g.a)({},x.a.centerContentStyle,{color:"red"})}," Gone ");var e,t=w.timeDifferenceToDateString(this.props.currentTime,this.props.departure.departureTime),n=t.hh,r=t.mm,i=t.ss,o=function(e){return e.toString().padStart(2,"0")};return e=n>0?"".concat(o(n),":").concat(o(r),":").concat(o(i)):"".concat(o(r),":").concat(o(i)),[a.a.createElement("div",{style:x.a.centerContentStyle},a.a.createElement(K.a,{glyph:"time"})),a.a.createElement("h5",{style:x.a.centerContentStyle},e)]}},{key:"lineTag",value:function(){return a.a.createElement(T.a,{backgroundColor:w.getColor(this.props.departure.label),line:this.props.departure.label})}},{key:"onClick",value:function(){this.props.watching||this.isGone()||this.props.watchDeparture(this.props.departure)}},{key:"getSuccessfulCatchPercentage",value:function(){return 1}},{key:"showQRCode",value:function(){var e=btoa(JSON.stringify(Y.a.pick(this.props.departure,"id,departureTime,label,destination".split(","))));this.props.showQR(e)}},{key:"getSEVStyle",value:function(){return this.props.departure.sev?{color:"#962984"}:{}}},{key:"getLiveDepartureColor",value:function(){return this.props.departure.live?{color:"green"}:{}}},{key:"render",value:function(){return a.a.createElement("div",{onClick:this.onClick.bind(this),style:Object(g.a)({},x.a.departureCard,{opacity:this.isGone()?.5:1})},a.a.createElement("div",{style:Object(g.a)({},x.a.departureCard.leftColumn,this.getLiveDepartureColor())},this.timeLeft()),a.a.createElement("div",{style:x.a.departureCard.middleColumn},a.a.createElement("div",{style:x.a.departureCard.middleColumn.upperRow},this.lineTag(),a.a.createElement("div",{style:this.getSEVStyle()},this.props.departure.destination)),a.a.createElement("div",{style:x.a.departureCard.middleColumn.lowerRow},"from ",a.a.createElement("b",null,this.props.departure.from.name))),a.a.createElement("div",{style:x.a.departureCard.rightColumn},a.a.createElement("div",{style:x.a.departureCard.rightColumn.upperRow},this.departureTime())),this.props.watching&&a.a.createElement("div",{style:x.a.departureCard.rightColumn},a.a.createElement("div",{style:x.a.departureCard.rightColumn.center},a.a.createElement("div",{onClick:this.showQRCode.bind(this)},a.a.createElement(K.a,{glyph:"qrcode"}))),a.a.createElement("div",{style:x.a.departureCard.rightColumn.center},a.a.createElement("div",{onClick:this.props.removeWatchingDeparture},a.a.createElement(K.a,{glyph:"remove"})))))}}]),t}(a.a.Component),J=(a.a.Component,n(14));var $=Object(d.b)(function(e){return{currentTime:e.clock.currentTime,closestStations:e.mvg.closest_stations}},function(e){return{watchDeparture:function(t){return e({type:J.w,departure:t})},removeWatchingDeparture:function(){return e({type:J.w,departure:null})},showQR:function(t){return e({type:J.v,qr:t})}}})(X),Z=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={value:"",suggestions:[]},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getConnections",value:function(){var e=this,t=this.props.station.id;return this.props.connections[t]?this.props.connections[t].filter(function(t){return t.departure>e.props.currentTime}).sort(function(e,t){return e.arrival-t.arrival}):null}},{key:"getConnectionLoadingComponent",value:function(){return a.a.createElement(y.i,{bsStyle:"info"}," Fetching connections... ")}},{key:"getConnectionDisplayComponents",value:function(e){var t=this.getConnections();if(!t||e>=t.length)return this.getConnectionLoadingComponent();var n=t[e];return w.getConnectionDisplayComponents(n)}},{key:"getFastestConnectionDisplayComponents",value:function(){return this.getConnectionDisplayComponents(0)}},{key:"getTravelTimeComponent",value:function(){var e=this.getConnections();if(!e||!e.length)return null;var t=e[0],n=w.unixTimeStampToDateHHMM(t.departure),r=w.unixTimeStampToDateHHMM(t.arrival),i=w.timeDifferenceToDateHHMMSS(this.props.currentTime,t.departure);" ".concat(n," - ").concat(r);return a.a.createElement("div",{style:x.a.destinationCard.upperRow.right},a.a.createElement("div",{style:x.a.destinationCard.upperRow.right.up},a.a.createElement("h4",null,r)),a.a.createElement("div",{style:x.a.destinationCard.upperRow.right.down},a.a.createElement("h6",null,"Depart in ",i)))}},{key:"render",value:function(){var e=this.state;e.value,e.suggestions,this.onChange,this.onBlur;return this.isEdit()?a.a.createElement(y.q,{bsSize:"large"},a.a.createElement(y.f,{horizontal:!0},a.a.createElement(y.g,null,a.a.createElement(y.c,{componentClass:y.d,sm:2},"Station:"),a.a.createElement(y.c,{sm:10},a.a.createElement(M,{onSelect:this.props.onSelect})))," ",a.a.createElement(y.a,{block:!0,type:"submit",onClick:this.props.onCancel},"Cancel"))):a.a.createElement("div",{style:x.a.destinationCard,onClick:!this.props.isRemoving&&this.props.onClick},a.a.createElement("div",{style:x.a.destinationCard.upperRow},a.a.createElement("div",{style:x.a.destinationCard.upperRow.left},!this.props.isRemoving&&a.a.createElement("h6",null,"to")," ",a.a.createElement("h4",{style:x.a.destinationCard.upperRow.left.name}," ",this.props.station.name," ")),this.props.isRemoving?this.getRemoveComponent():this.getTravelTimeComponent()),!this.props.isRemoving&&a.a.createElement("div",{style:x.a.destinationCard.lowerRow},this.getFastestConnectionDisplayComponents()))}},{key:"isEdit",value:function(){return!this.props.station}},{key:"getRemoveComponent",value:function(){return a.a.createElement("div",{style:x.a.destinationCard.upperRow.remove},a.a.createElement(y.a,{bsStyle:"danger",onClick:this.props.onRemove},a.a.createElement(y.h,{glyph:"trash"})))}}]),t}(a.a.Component);var ee=Object(d.b)(function(e){return{currentTime:e.clock.currentTime,stationsList:e.mvg.stations,destinations:e.destination.destinations,connections:e.mvg.connections}},null)(Z),te=n(1014),ne=n(1008),re=n(1009),ae=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).displayMode={LIST:1,MAP:2},n.state={numDestinationShown:2,currentPage:1,isAddingNewDestination:!1,isRemoving:!1,selectedConnection:null,selectedPart:null,displayMode:n.displayMode.LIST},n.props.getDestinations(),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){0==e.destinations.length&&this.state.isRemoving&&this.setState(Object(g.a)({},this.state,{isRemoving:!1,currentPage:1}))}},{key:"getConnections",value:function(e){var t=this,n=e.id,r=this.props.connections[n];return r&&r.length?r=r.filter(function(e){return!!e&&e.departure>t.props.currentTime}).sort(function(e,t){return e.arrival-t.arrival}):null}},{key:"getConnectionTooltipRemainingDepartureTime",value:function(e){var t=this.getConnections(e);if(!t||!t[0])return"N/A";var n=t[0];return w.timeDifferenceToDateHHMMSS(this.props.currentTime,n.departure)}},{key:"getArrivalTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getConnections(e);return n&&n[t]?w.unixTimeStampToDateHHMM(n[t].arrival):"N/A"}},{key:"getTravelTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getConnections(e);return n&&n[t]?w.timeDifferenceFormatString(n[t].departure,n[t].arrival):"N/A"}},{key:"getOpacityForLine",value:function(e){return this.state.selectedPart||this.state.selectedConnection?this.state.selectedConnection?this.state.selectedPart?void 0:this.state.selectedConnection.connectionPartList.find(function(t){return t.from.id===e.fromStationId&&t.to.id===e.toStationId})?1:.5:this.state.selectedPart.label===e.label?1:.5:1}},{key:"onLineMouseOver",value:function(e){this.setState(Object(g.a)({},this.state,{selectedPart:e}))}},{key:"clearLineHighlight",value:function(){this.setState(Object(g.a)({},this.state,{selectedPart:null}))}},{key:"highlightLinesToStation",value:function(e){var t=this.getConnections(e);if(t&&t[0]){var n=t[0];this.setState(Object(g.a)({},this.state,{selectedConnection:n}))}}},{key:"clearHighlightsToStation",value:function(){this.setState(Object(g.a)({},this.state,{selectedConnection:null}))}},{key:"getMap",value:function(){var e=this;if(this.props.closest_stations){var t=this.props.closest_stations[0],n=t.latitude,r=t.longitude;return a.a.createElement(j.a,{zoomControl:!1,center:[n,r],zoom:11,style:{height:"100%",width:"100%"}},a.a.createElement(te.a,{url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),a.a.createElement(k.a,{position:[n,r],draggable:!1},a.a.createElement(S.a,null,"You are here")),a.a.createElement(ne.a,{radius:2e3,center:[n,r]}),this.props.destinations.map(function(t){return a.a.createElement(k.a,{draggable:!1,position:[t.latitude,t.longitude],onMouseOver:e.highlightLinesToStation.bind(e,t),onMouseOut:e.clearHighlightsToStation.bind(e),onClick:e.props.showDestinationDetail.bind(e,t)},a.a.createElement(S.a,{permanent:!0},a.a.createElement("div",{style:x.a.tooltip.container},a.a.createElement("div",{style:x.a.tooltip.container.overview},t.name),a.a.createElement("div",{style:x.a.tooltip.container.departureTime},a.a.createElement("div",{style:x.a.tooltip.container.departureTime.left},a.a.createElement(K.a,{glyph:"time"}),e.getConnectionTooltipRemainingDepartureTime(t)),a.a.createElement("div",{style:x.a.tooltip.container.departureTime.center},a.a.createElement(K.a,{glyph:"flag"}),e.getArrivalTime(t)),a.a.createElement("div",{style:x.a.tooltip.container.departureTime.right},a.a.createElement(K.a,{glyph:"transfer"}),e.getTravelTime(t))))))}),Object.values(this.props.connectionLines).map(function(t){return a.a.createElement(re.a,{opacity:e.getOpacityForLine(t),color:w.getColor(t.label),onMouseOver:e.onLineMouseOver.bind(e,t),onMouseOut:e.clearLineHighlight.bind(e),positions:t.coords},a.a.createElement(S.a,null,t.label))}))}}},{key:"header",value:function(){var e=this,t=Object.values(this.displayMode).map(function(t){var n=function(t,n){return a.a.createElement(y.a,{onClick:e.setDisplayMode.bind(e,t),bsSize:"small"},a.a.createElement(K.a,{glyph:n}))};switch(t){case e.displayMode.LIST:return n(t,"list");case e.displayMode.MAP:return n(t,"map-marker");default:return null}});return t=this.state.isRemoving?t.concat([a.a.createElement(y.a,{bsSize:"small",bsStyle:"danger",onClick:this.clearDestinations.bind(this)},"Remove All"),a.a.createElement(y.a,{bsSize:"small",onClick:this.cancelRemoveDestinations.bind(this)},"Cancel")]):t.concat(a.a.createElement(y.a,{bsSize:"small",bsStyle:"danger",onClick:this.removeDestinations.bind(this)},"Remove")),a.a.createElement("div",{style:x.a.destinationList.header},a.a.createElement("h2",null," Destinations "),this.props.destinations.length>0&&a.a.createElement(y.b,null,t))}},{key:"removeDestinations",value:function(){this.setState(Object(g.a)({},this.state,{isRemoving:!0,currentPage:1,displayMode:this.displayMode.LIST,numDestinationShown:5,isAddingNewDestination:!1}))}},{key:"cancelRemoveDestinations",value:function(){this.setState(Object(g.a)({},this.state,{numDestinationShown:3,isRemoving:!1}))}},{key:"clearDestinations",value:function(e){e.preventDefault(),this.props.clearDestinations()}},{key:"displayAddDestinationCell",value:function(){this.state.isAddingNewDestination||this.setState(Object(g.a)({},this.state,{isAddingNewDestination:!0}))}},{key:"cancelAdd",value:function(){this.setState(Object(g.a)({},this.state,{isAddingNewDestination:!1}))}},{key:"editComponent",value:function(){return a.a.createElement(ee,{isEditing:!0,onCancel:this.cancelAdd.bind(this),onSelect:this.addDestination.bind(this)})}},{key:"addDestination",value:function(e){this.props.addDestination(e),this.setState({isAddingNewDestination:!1})}},{key:"addNewDestinationButton",value:function(){return a.a.createElement(q,{onClick:this.displayAddDestinationCell.bind(this),opacity:.5,glyphicon:"plus",text:"Click to add a new destination"})}},{key:"destinationComponents",value:function(){var e=this,t=this.state.numDestinationShown*(this.state.currentPage-1),n=t+this.state.numDestinationShown;return a.a.createElement("div",{style:x.a.destinationList.destinationContainer},this.props.destinations.map(function(t){return a.a.createElement(ee,{key:t.id,isEditing:!1,onClick:e.props.showDestinationDetail.bind(e,t),onRemove:function(){return e.props.removeDestination(t)},isRemoving:e.state.isRemoving,station:t})}).concat(this.state.isAddingNewDestination?this.editComponent():null).concat(this.state.isRemoving?null:this.addNewDestinationButton()).filter(function(e){return!!e}).slice(t,n))}},{key:"paginationComponent",value:function(){var e=this,t=this.props.destinations.length;this.state.isRemoving||t++,this.state.isAddingNewDestination&&t++;var n=Math.ceil(t/this.state.numDestinationShown);return n<=1?null:a.a.createElement("div",{style:x.a.destinationList.pagination},a.a.createElement(y.p,null,w.listOfN(n).map(function(t){return a.a.createElement(y.p.Item,{onClick:function(){return e.setState(Object(g.a)({},e.state,{currentPage:t}))}}," ",t," ")})))}},{key:"setDisplayMode",value:function(e){-1!=Object.values(this.displayMode).indexOf(e)&&this.setState(Object(g.a)({},this.state,{displayMode:e,isRemoving:this.state.isRemoving&&e!=this.displayMode.MAP}))}},{key:"getDisplayComponents",value:function(){switch(this.state.displayMode){case this.displayMode.LIST:return[this.destinationComponents(),this.props.destinations.length&&this.paginationComponent()||null];case this.displayMode.MAP:return this.getMap();default:return null}}},{key:"render",value:function(){return a.a.createElement("div",{style:x.a.mainContainer.leftContainer.bottomContainer},this.header(),this.getDisplayComponents())}}]),t}(a.a.Component);var ie=Object(d.b)(function(e){return Object(g.a)({},e.destination,{closest_stations:e.mvg.closest_stations,stations:e.mvg.stations,connections:e.mvg.connections,currentTime:e.clock.currentTime,lines:e.mvg.lines,connectionLines:e.mvg.connectionLines})},function(e){return{getDestinations:function(){return e({type:G.g})},addDestination:function(t){return e({type:G.a,station:t})},clearDestinations:function(){return e({type:G.d})},removeDestination:function(t){return e({type:G.j,destination:t})},refereshRoute:function(t){return e({type:G.g,target_station_id:t})},getLineInfo:function(t){return e({type:J.k,line:t})},showDestinationDetail:function(t){return e({type:G.m,destination:t})}}})(ae),oe=(n(1010),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).timeFilter=[1,3,5,10,15,20,30,40,60],n.state={numDeparturesShown:3,departurePage:1,showPopup:!1,filterLabel:null,timeFilter:null},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getNextRefreshTime",value:function(){var e=this.props.clock%60;return 0==e?0:60-e}},{key:"getNextRefreshComponent",value:function(){var e,t=this.getNextRefreshTime();return e=this.props.shouldUpdate?0==t?a.a.createElement(y.i,{bsStyle:"success"},"Refreshing..."):"Next refresh in : ".concat(this.getNextRefreshTime()," second(s)"):"Refresh Paused (".concat(this.getNextRefreshTime(),")"),a.a.createElement(y.n,{onClick:this.props.toggleUpdate},e)}},{key:"navBar",value:function(){return a.a.createElement(y.o,{fluid:!0},a.a.createElement(y.o.Header,null,a.a.createElement(y.o.Brand,null,"MVG Dashboard")),a.a.createElement(y.o.Collapse,null,a.a.createElement(y.l,null,this.isStationLoaded()&&this.getNextRefreshComponent()),a.a.createElement(y.l,{pullRight:!0},this.props.error&&a.a.createElement(y.n,{disabled:!0},a.a.createElement(y.i,{bsStyle:"success"},"Error: ",this.props.error.toString())),this.getConnectivityComponent(),a.a.createElement(y.n,{onClick:this.selectLocation.bind(this),style:x.a.navBar.location},this.props.closest_stations.length&&this.props.closest_stations[0].name||null,a.a.createElement("span",{className:"glyphicon glyphicon-map-marker"})),a.a.createElement(y.n,{eventKey:1,href:"#"},this.props.currentTime.toLocaleString()))))}},{key:"getConnectivityComponent",value:function(){var e={MVG:this.props.mvg_status,MVV:this.props.mvv_status,Backend:this.props.backend_status,Proxy:this.props.proxy_status},t=Object.values(e).reduce(function(e,t){return t?e:e+1},0);return a.a.createElement(y.m,{title:t?"".concat(t," failed"):"Connected"},Object.keys(e).map(function(t){return a.a.createElement(y.j,{key:t},a.a.createElement("div",{style:x.a.stationSelection},a.a.createElement("div",{style:x.a.stationSelection.labels},t),a.a.createElement("div",{style:x.a.stationSelection.name},e[t]?a.a.createElement(y.h,{glyph:"ok"}):a.a.createElement(y.h,{glyph:"remove"}))))}))}},{key:"isStationLoaded",value:function(){return this.props.stations&&this.props.stations.length>0}},{key:"loadingOverlay",value:function(){var e={};return e=this.props.error?{overlayType:"error",title:this.props.error.toString()}:{overlayType:"loading",title:"Loading Stations from MVG..."},a.a.createElement(A,e)}},{key:"getMap",value:function(){return null}},{key:"selectLocation",value:function(){this.setState(Object(g.a)({},this.state,{showPopup:!0}))}},{key:"hidePopup",value:function(){this.setState(Object(g.a)({},this.state,{showPopup:!1})),this.props.clearDestinationDetail(),this.props.clearDepartureQR()}},{key:"watchingDepatureComponent",value:function(){return a.a.createElement("div",{style:x.a.watchingDeparture},a.a.createElement($,{watching:!0,departure:this.props.watchingDepature}))}},{key:"leftContainer",value:function(){if(0==this.props.closest_stations.length)return null;this.props.closest_stations[0];return this.props.isChangingLocation?a.a.createElement(N,null):a.a.createElement("div",{style:x.a.mainContainer.leftContainer},this.props.watchingDepature&&this.watchingDepatureComponent(),a.a.createElement(ie,null))}},{key:"closestStationList",value:function(){var e=this;if(!this.props.closest_stations||!this.props.closest_stations.length)return a.a.createElement("div",{style:x.a.centerContentStyle},a.a.createElement("h5",null," No stations around "));var t=a.a.createElement("h3",null," Stations Nearby "),n=this.props.closest_stations.map(function(t){return a.a.createElement(V,{station:t,lat:e.props.lat,lng:e.props.lng})}).slice(1);return[t].concat(Object(b.a)(n))}},{key:"getFilteredDepartureList",value:function(){var e=this;return this.props.departures.filter(function(t){return!e.state.filterLabel||t.label&&e.state.filterLabel===t.label}).filter(function(t){return!e.state.timeFilter||(t.departureTime-e.props.currentTime)/6e4>e.state.timeFilter})}},{key:"departureList",value:function(){if(!this.getFilteredDepartureList().length)return a.a.createElement(q,{glyphicon:"exclamation-sign",text:"No departures nearby or no matched departures found.",opacity:.8});var e=this.state.numDeparturesShown*(this.state.departurePage-1),t=Math.min(this.props.departures.length,e+this.state.numDeparturesShown);return this.getFilteredDepartureList().slice(e,t).map(function(e){return a.a.createElement($,{departure:e})})}},{key:"getDeparturePagination",value:function(){var e=this,t=this.getFilteredDepartureList();if(t.length<=this.state.numDeparturesShown)return null;var n=Math.floor(t.length/this.state.numDeparturesShown);return a.a.createElement(y.p,null,w.listOfN(n).map(function(t){return a.a.createElement(y.p.Item,{active:e.state.departurePage==t,onClick:function(){return e.setState(Object(g.a)({},e.state,{departurePage:t}))}},t)}))}},{key:"filterLabel",value:function(e){this.setState({filterLabel:e,departurePage:1})}},{key:"departureLineFilterDropdownList",value:function(){var e=this,t=Y.a.uniq(this.props.departures.map(function(e){return e.label})).map(function(t,n){return a.a.createElement(y.j,{key:n,eventKey:t,onSelect:e.filterLabel.bind(e)},a.a.createElement("div",{style:x.a.stationSelection},a.a.createElement("div",{style:x.a.stationSelection.labels},a.a.createElement(T.a,{backgroundColor:w.getColor(t),line:t})),a.a.createElement("div",{style:x.a.stationSelection.name},t)))});return[a.a.createElement(y.j,{key:-1,envetKey:null,onSelect:this.filterLabel.bind(this)},a.a.createElement("div",{style:x.a.stationSelection},a.a.createElement("div",{style:x.a.stationSelection.labels},a.a.createElement(y.h,{glyph:"remove"})),a.a.createElement("div",{style:x.a.stationSelection.name},"No filter")))].concat(Object(b.a)(t))}},{key:"departureTimeFilterDropdownList",value:function(){var e=this,t=this.timeFilter.map(function(t,n){return a.a.createElement(y.j,{key:n,eventKey:t,onSelect:e.filterTime.bind(e)},a.a.createElement("div",{style:x.a.stationSelection},a.a.createElement("div",{style:x.a.stationSelection.labels},">",t),a.a.createElement("div",{style:x.a.stationSelection.name},"minutes")))});return[a.a.createElement(y.j,{key:-1,envetKey:null,onSelect:this.filterTime.bind(this)},a.a.createElement("div",{style:x.a.stationSelection},a.a.createElement("div",{style:x.a.stationSelection.labels},a.a.createElement(y.h,{glyph:"remove"})),a.a.createElement("div",{style:x.a.stationSelection.name},"No filter")))].concat(Object(b.a)(t))}},{key:"filterTime",value:function(e){this.setState({timeFilter:e,departurePage:1})}},{key:"rightContainer",value:function(){return 0==this.props.closest_stations.length?null:a.a.createElement("div",{style:x.a.mainContainer.rightContainer},a.a.createElement("div",{style:x.a.mainContainer.rightContainer.topContainer},a.a.createElement("h2",{style:{paddingRight:16}},"Departures"),this.props.departures.length&&[a.a.createElement(y.e,{title:this.state.filterLabel||"Label filter",bsSize:"small"},this.departureLineFilterDropdownList()),a.a.createElement(y.e,{title:this.state.timeFilter&&">".concat(this.state.timeFilter," minute(s)")||"Time Filter",bsSize:"small"},this.departureTimeFilterDropdownList())]||null),a.a.createElement("div",{style:x.a.mainContainer.rightContainer.middleContainer},this.departureList()),a.a.createElement("div",{style:x.a.mainContainer.rightContainer.bottomContainer},this.getDeparturePagination()))}},{key:"popup",value:function(){return a.a.createElement(W,{onHide:this.hidePopup.bind(this)})}},{key:"render",value:function(){return a.a.createElement("div",{style:x.a.app},!this.isStationLoaded()&&this.loadingOverlay(),this.navBar(),(this.state.showPopup||this.props.destinationDetail||this.props.departureQR)&&this.popup(),a.a.createElement("div",{style:x.a.mainContainer},this.leftContainer(),this.rightContainer(),this.getMap()))}}]),t}(r.Component)),ce=n(78);var se=Object(d.b)(function(e){return Object(g.a)({},e.clock,e.mvg,e.location,e.connectivity,{destinationDetail:e.destination.destinationDetail})},function(e){return{toggleUpdate:function(){return e({type:ce.c})},toggleChangeLocation:function(){return e({type:R.d})},clearDestinationDetail:function(){return e({type:G.m,destination:null})},clearDepartureQR:function(){return e({type:J.v,qr:null})}}})(oe),ue=function(){return a.a.createElement(v,null,a.a.createElement(h.a,null,a.a.createElement(m.a,{path:"/",component:se})))},le=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(d.a,{store:this.props.store},a.a.createElement(f.a,{history:this.props.history},a.a.createElement(ue,null)))}}]),t}(r.Component),pe=n(325),de=(n(1e3),Object(pe.configureStore)());Object(i.render)(a.a.createElement(o.AppContainer,null,a.a.createElement(le,{store:de,history:pe.history})),document.getElementById("root"))},1004:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"INCREMENT_COUNTER",function(){return l}),n.d(r,"DECREMENT_COUNTER",function(){return p}),n.d(r,"increment",function(){return d}),n.d(r,"decrement",function(){return f}),n.d(r,"incrementIfOdd",function(){return h}),n.d(r,"incrementAsync",function(){return m});var a=n(10),i=n(65),o=n(482),c=n(484),s=n(118),u=n(483),l="INCREMENT_COUNTER",p="DECREMENT_COUNTER";function d(){return{type:l}}function f(){return{type:p}}function h(){return function(e,t){t().counter%2!==0&&e(d())}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return function(t){setTimeout(function(){t(d())},e)}}var v=n(78),g={clock:0,currentTime:new Date,shouldUpdate:!0};var b=n(72),y=n(33),x=n(14),O={stations:[],closest_stations:[],departures:[],error:null,connections:{},lines:{},connectionLines:{},watchingDepature:null,departureQR:null};var E=n(19),C=n(60),j={destinations:[],destinationDetail:null,error:null};var k=n(69),S={isChangingLocation:!1};var w="SET_MVG_CONNECTIVITY_FLAG",T="SET_PROXY_CONNECTIVITY_FLAG",D="SET_BACKEND_CONNECTIVITY_FLAG",L="SET_MVV_CONNECTIVITY_FLAG",I={mvg_status:!0,mvv_status:!0,backend_status:!0,proxy_status:!0};var _=Object(i.c)({counter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case l:return e+1;case p:return e-1;default:return e}},mvg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.error&&console.log(t),t.type){case x.j:return Object(a.a)({},e,{departures:t.departures});case x.i:return Object(a.a)({},e,{departures:[],error:t.error});case x.d:return Object(a.a)({},e,{closest_stations:t.closest_stations});case x.b:return Object(a.a)({},e,{error:t.error});case x.c:return Object(a.a)({},e,{stations:t.stations,error:null});case x.s:return Object(a.a)({},e,{closest_stations:t.closest_stations});case x.t:return Object(a.a)({},e,{lat:t.lat,lng:t.lng});case x.j:return Object(a.a)({},e,{departures:t.departures,error:null});case x.f:return Object(a.a)({},e,{error:t.error});case x.r:return Object(a.a)({},e,{connections:Object.assign.apply(Object,Object(y.a)(Object.keys(e.connections).filter(function(e){return e!=t.connection}).map(function(t){return Object(b.a)({},t,e.connections[t])})))});case x.g:return Object(a.a)({},e,{error:null,connections:Object(a.a)({},e.connections,t.connections)});case x.p:return Object(a.a)({},e,{error:null,lines:Object(a.a)({},e.lines,Object(b.a)({},t.name,t.line))});case x.u:return Object(a.a)({},e,{connectionLines:Object.assign({},t.connectionLines)});case x.w:return Object(a.a)({},e,{watchingDepature:t.departure});case x.v:return Object(a.a)({},e,{departureQR:t.qr});default:return e}},clock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;switch((arguments.length>1?arguments[1]:void 0).type){case v.a:return Object(a.a)({},e,{clock:0});case v.b:return Object(a.a)({},e,{clock:e.clock+1,currentTime:new Date});case v.c:return Object(a.a)({},e,{shouldUpdate:!e.shouldUpdate});default:return e}},destination:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.c:return Object(a.a)({},e,{destinations:[].concat(Object(y.a)(e.destinations),[t.station])});case E.i:return Object(a.a)({},e,{destinations:t.destinations});case E.f:return Object(a.a)({},e,{destinations:[]});case E.m:return Object(a.a)({},e,{destinationDetail:t.destination});case E.b:case E.h:case E.e:return Object(a.a)({},e,{error:t.error});default:return Object(a.a)({},e,{error:null})}},location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;switch((arguments.length>1?arguments[1]:void 0).type){case k.d:return Object(a.a)({},e,{isChangingLocation:!e.isChangingLocation});default:return e}},router:s.d,connectivity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(a.a)({},e,{mvg_status:t.ok});case L:return Object(a.a)({},e,{mvv_status:t.ok});case D:return Object(a.a)({},e,{backend_status:t.ok});case T:return Object(a.a)({},e,{proxy_status:t.ok});default:return e}}}),N=n(28),R=n(9),M=n.n(R),P=n(11),A=n(187),F=n(15),H=M.a.mark(V),B=M.a.mark(z),U=M.a.mark(K),G=M.a.mark(Q),W="location";function q(){return Object(C.getPromise)(W)}function V(e){var t,n;return M.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.lat,n=e.lng,r.prev=1,r.next=4,Object(P.b)(C.setPromise,W,{lat:t,lng:n});case 4:return r.next=6,Object(P.c)({type:k.c,lat:t,lng:n});case 6:r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(1),r.next=12,Object(P.c)({type:k.b,error:r.t0});case 12:case"end":return r.stop()}},H,this,[[1,8]])}function z(){var e;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(P.c)({type:x.q});case 2:return t.next=4,Object(P.d)(function(e){return e.destination.destinations});case 4:return e=t.sent,t.next=7,Object(P.c)({type:E.i,destinations:e});case 7:return t.next=9,Object(P.e)(x.g);case 9:return t.next=11,Object(P.c)({type:x.a});case 11:case"end":return t.stop()}},B,this)}function K(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(k.a,V);case 2:case"end":return e.stop()}},U,this)}function Q(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(k.c,z);case 2:case"end":return e.stop()}},G,this)}var Y=n(47),X=n(24),J=n(25),$=(n(351),n(15)),Z=n(60),ee=n(821),te=function(){function e(){Object(X.a)(this,e),this.storeEncodeKey="encode",this.proxy="http://localhost:9898/mvv",this.endpoint="".concat(this.proxy,"/ng/XML_GEOOBJECT_REQUEST?"),this.encodingEndpoint="".concat(this.proxy,"/xhr_regiobuses?zope_command=cached"),this.generalEncodingEndpoint="".concat(this.proxy,"/index.html"),this.header={}}return Object(J.a)(e,[{key:"getLineInfoEncode",value:function(){var e=Object(Y.a)(M.a.mark(function e(t){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getPromise(this.storeEncodeKey);case 2:if(n=e.sent,0!=Object.keys(n).filter(function(e){return n[e]==t}).length){e.next=6;break}return e.abrupt("return",null);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRegionalBusEncodings",value:function(){var e=Object(Y.a)(M.a.mark(function e(){var t,n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.performRequest(this.encodingEndpoint,!1);case 3:return t=e.sent,n=ee.load(t),r=Object.assign.apply(Object,Object(y.a)(n("label").map(function(e,t){return Object(b.a)({},n(t).find("input").attr("value"),n(t).find("img").attr("alt"))}).get())),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"fetchGeneralEncodings",value:function(){var e=Object(Y.a)(M.a.mark(function e(){var t,n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.performRequest(this.generalEncodingEndpoint,!1);case 3:return t=e.sent,n=ee.load(t),r=Object.assign.apply(Object,Object(y.a)(n("label").filter(function(e,t){return n(t).has("input")}).map(function(e,t){return Object(b.a)({},n(t).find("input").attr("value"),n(t).find("img").attr("alt"))}).get())),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"fetchLineEncodings",value:function(){var e=Object(Y.a)(M.a.mark(function e(){var t,n,r,i=arguments;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(i.length>0&&void 0!==i[0])||i[0])){e.next=7;break}return e.next=4,Z.getPromise(this.storeEncodeKey);case 4:if(t=e.sent,!Object.keys(t).length){e.next=7;break}return e.abrupt("return",t);case 7:return e.next=9,Promise.all([this.fetchRegionalBusEncodings(),this.fetchGeneralEncodings()]);case 9:return n=e.sent,r=Object(a.a)({},n[0],n[1]),e.next=13,Z.setPromise(this.storeEncodeKey,r);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getLineInfo",value:function(){var e=Object(Y.a)(M.a.mark(function e(t){var n,r,a,i,o,c,s=this,u=arguments;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(u.length>1&&void 0!==u[1])||u[1],!(t.indexOf("-")>0)){e.next=5;break}return e.next=4,this.getLineInfo(t.split("-")[0],n);case 4:return e.abrupt("return",e.sent);case 5:if(!n){e.next=11;break}return e.next=8,Z.getPromise(t);case 8:if(r=e.sent,!(Object.keys(r).length>0)){e.next=11;break}return e.abrupt("return",r);case 11:return e.next=13,this.getLineInfoEncode(t);case 13:if(a=e.sent){e.next=16;break}return e.abrupt("return",null);case 16:return i=function(e){return"".concat(s.endpoint,"&line=").concat(e,"&outputFormat=json&coordListOutputFormat=STRING&hideBannerInfo=1&lineReqType=6&returnSinglePath=1&command=bothdirections")},e.prev=17,e.next=20,Promise.all(a.map(i).map(this.performRequestJSON.bind(this)));case 20:if(!(o=e.sent).some(function(e){return!e.geoObjects})){e.next=23;break}return e.abrupt("return",null);case 23:return c=$.flattenList(o.map(function(e){return e.geoObjects.items.map(function(e){return e.item})})),e.next=26,Z.setPromise(t,c);case 26:return e.abrupt("return",c);case 29:return e.prev=29,e.t0=e.catch(17),e.abrupt("return",null);case 32:case"end":return e.stop()}},e,this,[[17,29]])}));return function(t){return e.apply(this,arguments)}}()},{key:"performRequestJSON",value:function(e){return fetch(e,{headers:Object(a.a)({},this.header)}).then(function(e){return e.json()})}},{key:"performRequest",value:function(e){return fetch(e,{headers:this.header}).then(function(e){return e.text()})}},{key:"getPartsForNthConnection",value:function(e,t,n,r){if(!e[t])return null;var a=e[t].filter(function(e){return e.departure>n});return a.length<=r?null:a[r].connectionPartList}},{key:"getLineForConnection",value:function(e,t,n){var r=this;return e&&t&&n?Object.assign.apply(Object,Object(y.a)(e.map(function(e){var a=$.getConnectionPartCacheLabel(e);if(!a)return null;var i=r.computeLineSegment(e.from.id,e.to.id,a,t,n),o=i.coords;i.mvvStationParts;o||(o=[[e.from.latitude,e.from.longitude],[e.to.latitude,e.to.longitude]]);var c=e.from.id,s=e.to.id;return Object(b.a)({},a,{label:e.label,coords:o,fromStationId:c,toStationId:s})}).filter(function(e){return!!e}))):{}}},{key:"sortStations",value:function(e){var t=e.paths[0].path.split(" ").map($.coordsStringToCoord),n=e.points.map(function(e){return Object(a.a)({},e,{coords:$.coordsStringToCoord(e.ref.coords)})});return n.forEach(function(e){return e.index=$.getIndexOfClosestCoords(t,e.coords)}),n.sort(function(e,t){return e.index-t.index})}},{key:"getStationsBetween",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=function(e){return parseInt(e)%1e5},a=n.map(function(e){return r(e.ref.id)}),i=a.indexOf(e),o=a.indexOf(t),c=i<0||o<0;return c?null:i<o?n.slice(i,o+1):n.slice(o,i+1)}},{key:"computeLineSegment",value:function(e,t,n,r,a){var i=!1,o=$.splitConnectionPartCacheLabel(n).line;if(o.indexOf("-")>-1&&(o=o.split("-")[0],i=!0),!r[o]||!r[o].length)return{coords:null};var c=r[o][0],s=this.sortStations(c),u=i&&5,l=this.getStationsBetween(e,t,s,u);return l?{coords:l.map(function(e){return $.convertMVVStationToMVGStation(e,a)}).map(function(e){return e.coords}),mvvStationParts:l}:{coords:null,mvvStationParts:l}}}]),e}(),ne=M.a.mark(je),re=M.a.mark(ke),ae=M.a.mark(Se),ie=M.a.mark(we),oe=M.a.mark(Te),ce=M.a.mark(De),se=M.a.mark(Le),ue=M.a.mark(Ie),le=M.a.mark(_e),pe=M.a.mark(Ne),de=M.a.mark(Re),fe=M.a.mark(Me),he=M.a.mark(Pe),me=M.a.mark(Ae),ve=M.a.mark(Fe),ge=M.a.mark(He),be=M.a.mark(Be),ye=M.a.mark(Ue),xe=M.a.mark(Ge),Oe=M.a.mark(We),Ee=new A.a,Ce=new te;function je(){var e,t;return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t="stations",n.next=3,Object(P.b)(C.getPromise,t);case 3:if(e=n.sent,0!=Object.keys(e).length){n.next=28;break}return n.prev=5,n.next=8,Object(P.b)(Ee.getAllStations.bind(Ee));case 8:if(!(e=n.sent).error){n.next=14;break}return n.next=12,Object(P.c)({type:x.b,error:e.error});case 12:n.next=18;break;case 14:return n.next=16,Object(P.c)({type:x.c,stations:e});case 16:return n.next=18,Object(P.b)(C.setPromise,t,e);case 18:return n.next=20,Object(P.c)({type:w,ok:!0});case 20:n.next=26;break;case 22:return n.prev=22,n.t0=n.catch(5),n.next=26,Object(P.c)({type:w,ok:!1});case 26:n.next=30;break;case 28:return n.next=30,Object(P.c)({type:x.c,stations:e});case 30:case"end":return n.stop()}},ne,this,[[5,22]])}function ke(){var e;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(P.b)(q);case 2:if(e=t.sent){t.next=7;break}return t.abrupt("return",{lat:48.11081,lng:11.594633});case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}},re,this)}function Se(){var e;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(P.d)(function(e){return e.mvg.watchingDepature});case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Object(P.d)(function(e){return e.clock.currentTime});case 7:if(!(t.sent>e.departureTime)){t.next=11;break}return t.next=11,Object(P.c)({type:x.w,depature:null});case 11:case"end":return t.stop()}},ae,this)}function we(){var e,t,n,r,a,i;return M.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=function(e){return e.mvg.stations},o.next=3,Object(P.d)(e);case 3:if(!(t=o.sent)){o.next=19;break}return o.next=7,Object(P.b)(ke);case 7:return n=o.sent,r=n.lat,a=n.lng,o.next=12,Object(P.c)({type:x.t,lat:r,lng:a});case 12:return o.next=14,Object(P.b)(Ee.getClosestStations,r,a,t);case 14:return i=o.sent,o.next=17,Object(P.c)({type:x.s,closest_stations:i});case 17:return o.next=19,Object(P.c)({type:x.h});case 19:case"end":return o.stop()}},ie,this)}function Te(e){var t,n,r,a,i,o,c;return M.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.target_station_id,n=function(e){return e.mvg.closest_stations},s.next=4,Object(P.d)(n);case 4:if(!(r=s.sent)||!r.length){s.next=28;break}return a=r[0],i=a.id,s.prev=8,s.next=11,Object(P.b)(Ee.getConnections.bind(Ee),i,t);case 11:if((o=s.sent)&&o.length&&!o.error){s.next=17;break}return s.next=15,Object(P.c)({type:x.f,error:o.error});case 15:s.next=22;break;case 17:return c=Object(b.a)({},o[0].to.id,o),s.next=20,Object(P.c)({type:x.g,connections:c});case 20:return s.next=22,Object(P.c)({type:w,ok:!0});case 22:s.next=28;break;case 24:return s.prev=24,s.t0=s.catch(8),s.next=28,Object(P.c)({type:w,ok:!1});case 28:case"end":return s.stop()}},oe,this,[[8,24]])}function De(e){return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(P.b)(Te,{target_station_id:e.station.id});case 2:case"end":return t.stop()}},ce,this)}function Le(){var e,t,n,r,i;return M.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=function(e){return e.mvg.closest_stations},o.next=3,Object(P.d)(e);case 3:if(!(t=o.sent)||!t.length){o.next=25;break}return n=t.map(function(e){return e.id}),o.prev=6,o.next=9,Object(P.a)(n.map(function(e){return Object(P.b)(Ee.getDepartureById.bind(Ee),e)}));case 9:if((r=o.sent)&&r.length){o.next=14;break}return o.next=13,Object(P.c)({type:x.i});case 13:return o.abrupt("return");case 14:return i=F.flattenList(r.filter(function(e){return!e.error})).sort(function(e,t){return e.departureTime-t.departureTime}).map(function(e){return Object(a.a)({},e,{from:t.find(function(t){return t.id==e.id})})}).slice(0,30),o.next=17,Object(P.c)({type:x.j,departures:i});case 17:return o.next=19,Object(P.c)({type:w,ok:!0});case 19:o.next=25;break;case 21:return o.prev=21,o.t0=o.catch(6),o.next=25,Object(P.c)({type:w,ok:!1});case 25:case"end":return o.stop()}},se,this,[[6,21]])}function Ie(e){var t,n;return M.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.destinations,n=t.map(function(e){return e.id}),r.next=4,Object(P.a)(n.map(function(e){return Object(P.b)(Te,{target_station_id:e})}));case 4:case"end":return r.stop()}},ue,this)}function _e(){var e,t,n,r,a;return M.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(P.d)(function(e){return e.mvg.connections});case 2:return e=i.sent,i.next=5,Object(P.d)(function(e){return e.mvg.stations});case 5:return t=i.sent,i.next=8,Object(P.d)(function(e){return e.clock.currentTime});case 8:return n=i.sent,i.next=11,Object(P.d)(function(e){return e.mvg.lines});case 11:if(r=i.sent,Object.keys(e).length&&t&&r){i.next=14;break}return i.abrupt("return");case 14:return a=Object.assign.apply(Object,Object(y.a)(Object.keys(e).map(function(a){var i=Ce.getPartsForNthConnection(e,a,n,0);return Ce.getLineForConnection(i,r,t)}).filter(function(e){return!!e}))),i.next=17,Object(P.c)({type:x.u,connectionLines:a});case 17:case"end":return i.stop()}},le,this)}function Ne(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.c)({type:x.a});case 2:case"end":return e.stop()}},pe,this)}function Re(e){return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(P.c)({type:x.r,connection:e.connection});case 2:case"end":return t.stop()}},de,this)}function Me(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.c)(x.q,je);case 2:case"end":return e.stop()}},fe,this)}function Pe(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(x.h,Le);case 2:case"end":return e.stop()}},he,this)}function Ae(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(x.c,we);case 2:case"end":return e.stop()}},me,this)}function Fe(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.c)(x.e,Te);case 2:case"end":return e.stop()}},ve,this)}function He(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(E.i,Ie);case 2:case"end":return e.stop()}},ge,this)}function Be(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.c)(E.c,De);case 2:case"end":return e.stop()}},be,this)}function Ue(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(x.a,_e);case 2:case"end":return e.stop()}},ye,this)}function Ge(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(E.l,Re);case 2:case"end":return e.stop()}},xe,this)}function We(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(E.c,Ne);case 2:case"end":return e.stop()}},Oe,this)}var qe=M.a.mark($e),Ve=M.a.mark(Ze),ze=M.a.mark(et),Ke=M.a.mark(tt),Qe=M.a.mark(nt),Ye=M.a.mark(rt),Xe=M.a.mark(at),Je=M.a.mark(it);function $e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(P.b)(C.clearDestinations);case 3:return e.next=5,Object(P.c)({type:E.f});case 5:return e.next=7,Object(P.c)({type:D,ok:!0});case 7:e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,Object(P.c)({type:D,ok:!1});case 13:return e.next=15,Object(P.c)({type:E.e,error:e.t0});case 15:case"end":return e.stop()}},qe,this,[[0,9]])}function Ze(e){var t,n;return M.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.station,r.prev=1,r.next=4,Object(P.b)(C.addDestinations,t);case 4:return n=r.sent,r.next=7,Object(P.c)({type:E.c,station:n});case 7:return r.next=9,Object(P.c)({type:D,ok:!0});case 9:r.next=17;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,Object(P.c)({type:D,ok:!1});case 15:return r.next=17,Object(P.c)({type:E.b,error:r.t0});case 17:case"end":return r.stop()}},Ve,this,[[1,11]])}function et(){var e;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(P.b)(C.getDestinations);case 3:return e=t.sent,t.next=6,Object(P.c)({type:E.i,destinations:e});case 6:return t.next=8,Object(P.c)({type:D,ok:!0});case 8:t.next=16;break;case 10:return t.prev=10,t.t0=t.catch(0),t.next=14,Object(P.c)({type:D,ok:!1});case 14:return t.next=16,Object(P.c)({type:E.h,error:t.t0});case 16:case"end":return t.stop()}},ze,this,[[0,10]])}function tt(e){var t,n;return M.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.destination,n=t.id,r.next=5,Object(P.b)(C.removeDestinations,n);case 5:return r.next=7,Object(P.c)({type:E.g});case 7:return r.next=9,Object(P.c)({type:E.l,connection:n});case 9:return r.next=11,Object(P.c)({type:D,ok:!0});case 11:r.next=19;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,Object(P.c)({type:D,ok:!1});case 17:return r.next=19,Object(P.c)({type:E.k,error:r.t0});case 19:case"end":return r.stop()}},Ke,this,[[0,13]])}function nt(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.c)(E.a,Ze);case 2:case"end":return e.stop()}},Qe,this)}function rt(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(E.g,et);case 2:case"end":return e.stop()}},Ye,this)}function at(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(E.d,$e);case 2:case"end":return e.stop()}},Xe,this)}function it(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(E.j,tt);case 2:case"end":return e.stop()}},Je,this)}var ot=M.a.mark(ft),ct=M.a.mark(ht),st=M.a.mark(mt),ut=M.a.mark(vt),lt=M.a.mark(gt),pt=M.a.mark(bt),dt=new te;function ft(){var e;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(P.b)(dt.fetchLineEncodings.bind(dt));case 3:if(!(e=t.sent)){t.next=9;break}return t.next=7,Object(P.c)({type:x.n,result:e});case 7:t.next=11;break;case 9:return t.next=11,Object(P.c)({type:x.m});case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(0),t.next=17,Object(P.c)({type:x.m,error:t.t0});case 17:case"end":return t.stop()}},ot,this,[[0,13]])}function ht(e){var t,n;return M.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.line,r.next=4,Object(P.b)(dt.getLineInfo.bind(dt),t);case 4:if(n=r.sent){r.next=10;break}return r.next=8,Object(P.c)({type:x.o,line:t});case 8:r.next=12;break;case 10:return r.next=12,Object(P.c)({type:x.p,name:t,line:n});case 12:r.next=18;break;case 14:return r.prev=14,r.t0=r.catch(0),r.next=18,Object(P.c)({type:x.o,line:e.line,error:r.t0});case 18:case"end":return r.stop()}},ct,this,[[0,14]])}function mt(e){var t,n;return M.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.connections){r.next=3;break}return r.abrupt("return");case 3:return n=F.flattenList(Object.values(t)[0].map(function(e){return e.connectionPartList.map(function(e){return e.label})})).filter(function(e){return!!e}),n=Object(y.a)(new Set(n)),r.next=7,Object(P.a)(n.map(function(e){return Object(P.c)({type:x.k,line:e})}));case 7:case"end":return r.stop()}},st,this)}function vt(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.c)(x.k,ht);case 2:case"end":return e.stop()}},ut,this)}function gt(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.c)(x.g,mt);case 2:case"end":return e.stop()}},lt,this)}function bt(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(x.l,ft);case 2:case"end":return e.stop()}},pt,this)}var yt=M.a.mark(Ct),xt=M.a.mark(jt),Ot=M.a.mark(kt),Et=function(e){return e.clock.clock};function Ct(){var e,t;return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(P.d)(Et);case 2:return e=n.sent,n.next=5,Object(P.d)(function(e){return e.clock.shouldUpdate});case 5:return t=n.sent,n.next=8,Object(P.b)(Se);case 8:if(0!=e){n.next=15;break}return n.next=11,Object(P.c)({type:x.q});case 11:return n.next=13,Object(P.c)({type:E.g});case 13:return n.next=15,Object(P.c)({type:x.l});case 15:if(n.prev=15,!(e>0&&e%5==0&&t)){n.next=19;break}return n.next=19,Object(P.c)({type:x.a});case 19:if(!(e>0&&e%60==0&&t)){n.next=24;break}return n.next=22,Object(P.c)({type:x.h});case 22:return n.next=24,Object(P.c)({type:E.g});case 24:n.next=32;break;case 26:return n.prev=26,n.t0=n.catch(15),n.next=30,Object(P.c)({type:x.i,error:n.t0});case 30:return n.next=32,Object(P.c)({type:v.b});case 32:return n.next=34,Object(P.c)({type:v.b});case 34:case"end":return n.stop()}},yt,this,[[15,26]])}function jt(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(N.b)(1e3);case 3:return e.prev=3,e.next=6,Object(P.b)(Ct);case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(3),console.log("ticking error"),console.log(e.t0),e.next=14,jt();case 14:e.next=0;break;case 16:case"end":return e.stop()}},xt,this,[[3,8]])}function kt(e){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[Me(),Pe(),Fe(),Ae(),He(),Be(),nt(),at(),rt(),it(),vt(),gt(),bt(),Ue(),We(),Ge(),K(),Q(),jt()];case 2:case"end":return e.stop()}},Ot,this)}n.d(t,"history",function(){return wt}),n.d(t,"configureStore",function(){return Tt});var St=Object(N.a)(),wt=Object(c.a)(),Tt=function(e){var t=[],n=[];t.push(o.a);var c=Object(u.createLogger)({level:"info",collapsed:!0});t.push(c);var l=Object(s.c)(wt);t.push(l);var p=Object(a.a)({},r,s.b),d=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({actionCreators:p}):i.d;n.push(i.a.apply(void 0,t)),n.push(Object(i.a)(St));var f=d.apply(void 0,n),h=Object(i.e)(_,e,f);return St.run(kt),h}},12:function(e,t,n){"use strict";var r=n(10),a={display:"flex",alignItems:"center",justifyContent:"center"},i={display:"flex",justifyContent:"spaceAround",alignItems:"flexStart"},o=Object(r.a)({},a,{display:"flex",flexDirection:"column",width:40,height:40,padding:4,fontWeight:"bold"});t.a={tokenList:i,watchingDeparture:{backgroundColor:"#00bc8c",width:"100%"},app:{display:"flex",flexDirection:"column",overflowX:"hidden"},modal:{container:{display:"flex",flexDirection:"column",inputField:{flex:"0 0 20%",paddingBottom:16},map:{paddingTop:16,flex:"0 0 80%"}}},tooltip:{container:Object(r.a)({},a,{flexDirection:"column",overview:{flex:1},departureTime:{flex:1,display:"flex",justifyContent:"space-between",left:Object(r.a)({},o,{borderRight:"1px solid #333"}),right:Object(r.a)({},o,{borderLeft:"1px solid #333"}),center:Object(r.a)({},o)}})},stationSelection:{display:"flex",labels:{flex:1,display:"flex",flexWrap:"wrap",color:"white"},name:Object(r.a)({flex:1,textTransform:"capitalize"},a)},destinationList:{header:{display:"flex",flex:"0 0 10%",justifyContent:"space-between",alignItems:"center"},destinationContainer:{margin:16,flex:"0 0 65%"},pagination:{flex:"0 0 10%"}},destinationCard:{display:"flex",flexDirection:"column",transportationList:{margin:8},edit:{button:{padding:4}},upperRow:{display:"flex",alignItems:"center",justifyContent:"space-between",remove:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",marginTop:8,marginBottom:8},left:{flex:3,display:"flex",alignItems:"center",name:{paddingLeft:"16px"}},right:{flex:1,display:"flex",flexDirection:"column",textAlign:"right",up:{flex:1,fontWeight:"bold"},down:{flex:1}}},lowerRow:{display:"flex",alignItems:"center"},input:{container:{position:"relative"},input:{width:"100%",height:"80%",padding:"10px 20px",fontWeight:300,fontSize:16,border:"1px solid #aaa",borderTopLeftRadius:4,borderTopRightRadius:4,borderBottomLeftRadius:4,borderBottomRightRadius:4},inputFocused:{outline:"none"},inputOpen:{borderBottomLeftRadius:0,borderBottomRightRadius:0},suggestionsContainer:{display:"none"},suggestionsContainerOpen:{display:"block",zIndex:1e3,position:"absolute",top:40,width:"100%",border:"1px solid #aaa",backgroundColor:"#fff",color:"#222",fontWeight:300,fontSize:16,borderBottomLeftRadius:4,borderBottomRightRadius:4},suggestionsList:{margin:0,padding:0,listStyleType:"none"},suggestion:{cursor:"pointer",padding:"10px 20px"},suggestionHighlighted:{backgroundColor:"#ddd"}}},departureCard:{display:"flex",flexDirection:"row",height:"72px",leftColumn:{flex:1,justifyContent:"center",alignItems:"center"},middleColumn:{flex:4,display:"flex",flexDirection:"column",upperRow:{flex:1,fontWeight:"bold",display:"flex",flexDirection:"row"},lowerRow:{flex:1,fontSize:"12px"}},rightColumn:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-start",upperRow:{flex:1},center:{display:"flex",flex:1,width:"100%",alignItems:"center",justifyContent:"center"}}},lineTag:Object(r.a)({height:"16px",width:"24px",margin:"4px",fontSize:"9px",fontWeight:"bold"},a),centerContentStyle:a,imageWithText:Object(r.a)({display:"flex",margin:"24px",flexDirection:"column",textAlign:"center"},a),stationCard:Object(r.a)({width:"100%",display:"flex",flexDirection:"row"},{borderBottom:"1px solid white"},{leftContainer:{display:"flex",flexDirection:"column",flex:3,marginBottom:"4px",tokenList:i},rightContainer:Object(r.a)({display:"flex",flex:1,flexDirection:"column"},a)}),loadingOverlayStyle:Object(r.a)({},a,{position:"fixed",top:0,left:0,height:"100%",width:"100%",flexDirection:"column",zIndex:1001,backgroundColor:"rgba(0,0,0,0.5)",spinnerContainer:{height:"64px",width:"64px"}}),navBar:{location:{display:"flex",alignItems:"center",justifyContent:"center"}},mainContainer:{flex:1,overflowX:"hidden",width:"100%",bottom:0,left:0,display:"flex",flexDirection:"row",leftContainer:Object(r.a)({flex:"0 0 50%",display:"flex",margin:"1%",zIndex:2},a,{flexDirection:"column",topContainer:{flex:"0 0 144px",position:"relative",flexDirection:"column",width:"100%",overlay:{position:"absolute",top:0,left:0,zIndex:1e4,flexDirection:"column",padding:"1%"}},bottomContainer:{flex:"1 0 80%",flexDirection:"column",width:"100%",display:"flex",overflowY:"hidden"}}),rightContainer:Object(r.a)({flex:"0 0 50%",display:"flex",zIndex:2},a,{flexDirection:"column",topContainer:{flex:1,alignText:"center",width:"100%",marginBottom:"16px",alignItems:"center",justifyContent:"flex-start",display:"flex"},middleContainer:{flex:"4",width:"100%",overflowY:"hidden"},bottomContainer:{flex:"1",width:"100%"}})}}},14:function(e,t,n){"use strict";n.d(t,"q",function(){return r}),n.d(t,"h",function(){return a}),n.d(t,"i",function(){return i}),n.d(t,"j",function(){return o}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"s",function(){return l}),n.d(t,"t",function(){return p}),n.d(t,"e",function(){return d}),n.d(t,"g",function(){return f}),n.d(t,"f",function(){return h}),n.d(t,"r",function(){return m}),n.d(t,"k",function(){return v}),n.d(t,"p",function(){return g}),n.d(t,"o",function(){return b}),n.d(t,"l",function(){return y}),n.d(t,"n",function(){return x}),n.d(t,"m",function(){return O}),n.d(t,"a",function(){return E}),n.d(t,"u",function(){return C}),n.d(t,"w",function(){return j}),n.d(t,"v",function(){return k});var r="GET_STATIONS",a="GET_DEPARTURES",i="GET_DEPARTURES_FAILED",o="GET_DEPARTURES_SUCCESS",c="GET_CLOSEST_STATIONS",s="FETCH_STATION_FAILED",u="FETCH_STATION_SUCCESS",l="SET_CLOSEST_STATION",p="SET_CURRENT_LOCATION",d="GET_CONNECTION",f="GET_CONNECTION_SUCCESS",h="GET_CONNECTION_FAILED",m="REMOVE_CONNECTION",v="GET_LINE",g="GET_LINE_SUCCESS",b="GET_LINE_FAILED",y="GET_LINE_ENCODING",x="GET_LINE_ENCODING_SUCCESS",O="GET_LINE_ENCODING_FAILED",E="COMPUTE_LINE_SEGMENT",C="SET_LINE_SEGMENT_CACHE",j="WATCH_DEPARTURE",k="SHOW_QR"},15:function(e,t,n){"use strict";n.r(t),n.d(t,"getMapTileLayer",function(){return p}),n.d(t,"getStationName",function(){return d}),n.d(t,"getDistanceFromLatLonInKm",function(){return h}),n.d(t,"getProductColorCode",function(){return m}),n.d(t,"getColor",function(){return v}),n.d(t,"getProductShortName",function(){return g}),n.d(t,"getConnectionDisplayComponents",function(){return b}),n.d(t,"getStationProductLineTags",function(){return y}),n.d(t,"flattenList",function(){return x}),n.d(t,"unixTimeStampToDate",function(){return O}),n.d(t,"pad",function(){return E}),n.d(t,"unixTimeStampToDateHHMM",function(){return C}),n.d(t,"timeDifferenceToDateString",function(){return j}),n.d(t,"timeDifferenceFormatString",function(){return k}),n.d(t,"timeDifferenceToDateHHMMSS",function(){return S}),n.d(t,"listOfN",function(){return w}),n.d(t,"convertMVVStationToMVGStation",function(){return T}),n.d(t,"splitConnectionPartCacheLabel",function(){return D}),n.d(t,"getConnectionPartCacheLabel",function(){return L}),n.d(t,"getStationLatLng",function(){return I}),n.d(t,"getStationOverviewComponent",function(){return _}),n.d(t,"coordsStringToCoord",function(){return N}),n.d(t,"getIndexOfClosestCoords",function(){return R}),n.d(t,"getSmoothPathCoordsInLatLng",function(){return M});var r=n(10),a=n(33),i=n(0),o=n.n(i),c=n(67),s=n(12),u=n(13),l=n(1014),p=function(){return o.a.createElement(l.a,{url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager/{z}/{x}/{y}{r}.png"})},d=function(e){var t=e.name,n=e.place;return t&&n?"".concat(t,", ").concat(n):""},f=function(e){return e*(Math.PI/180)},h=function(e,t,n,r){var a=f(n-e),i=f(r-t),o=Math.sin(a/2)*Math.sin(a/2)+Math.cos(f(e))*Math.cos(f(n))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},m=function(e){switch(e){case"SBAHN":return"#964438";case"UBAHN":return"#dd3d4d";case"BUS":return"#0d5c70";case"TRAM":return"#ea4029";default:return"#222"}},v=function(e){if(!e)return"#eeeeee";switch(e.indexOf("-")>0&&(e=e.split("-")[0]),e){case"U1":case"U7":return"#45803A";case"U2":return"#C2133B";case"U3":case"U8":return"#F16E3B";case"U4":return"#20B28D";case"U5":return"#B77320";case"U6":return"#0E6DB1";case"U":return;case"S1":return"#29C0E7";case"S2":return"#73BE4C";case"S3":return"#8E2C8D";case"S4":return"#EB2131";case"S6":return"#159865";case"S7":return"#873330";case"S8":return"#231F20";case"S20":return"#E8536F"}if(e.match(/^\d{2}$/)){var t=parseInt(e);if(12<=t&&t<=37)return"#D62429";if(50>=t)return"#EA6732"}return"R"==e[0]?"#373B7D":"X"==e[0]?"#51907A":"#085365"},g=function(e){switch(e){case"TRAM":return"Tram";case"BUS":return e;default:return e[0]}},b=function(e){var t=o.a.createElement(u.h,{glyph:"arrow-right"}),n=o.a.createElement(u.h,{glyph:"piggy-bank"}),r=e.connectionPartList.map(function(e){if("FOOTWAY"==e.connectionPartType)return n;var t=e.label;return o.a.createElement(c.a,{key:e.label,backgroundColor:v(t),line:t})}).map(function(e,t){return o.a.createElement("div",{key:t,style:s.a.destinationCard.transportationList}," ",e," ")}).reduce(function(e,n){return e.concat(n,t)},[]);return r.pop(),r},y=function(e){return e.products.map(function(e){return o.a.createElement(c.a,{line:g(e),backgroundColor:m(e)})})},x=function(e){return e.reduce(function(e,t){return[].concat(Object(a.a)(e),Object(a.a)(t))},[])},O=function(e){return new Date(e)},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toString().padStart(t,"0")},C=function(e){var t=O(e),n=E(t.getHours()),r=E(t.getMinutes());return"".concat(n,":").concat(r)},j=function(e,t){var n=t-e,r=n<0,a=n,i=Math.floor(a/1e3/60/60);a-=1e3*i*60*60;var o=Math.floor(a/1e3/60);a-=1e3*o*60;var c=Math.floor(a/1e3);return a-=1e3*c,{hh:i,mm:o,ss:c,hasPassed:r}},k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=j(e,t),a=r.hh,i=r.mm,o=(r.ss,r.hasPassed?"-":n?"+":"");return 0==a&&i<=1?"< ".concat(o,"1min"):a>0?"".concat(o).concat(a,":").concat(i,"h"):"".concat(o).concat(i,"min")},S=function(e,t){var n=j(e,t),r=n.hh,a=n.mm,i=n.ss,o=n.hasPassed?"-":"";return r>0&&(o+=E(r)+":"),"".concat(o).concat(E(a),":").concat(E(i))},w=function(e){return Object(a.a)(Array(e+1).keys()).slice(1)},T=function(e,t){var n;try{n=t.find(function(t){return t.id==parseInt(e.ref.id)%1e5})}catch(i){return null}var a=[n.latitude,n.longitude];return Object(r.a)({},e,{coords:a})},D=function(e){var t=e.split("-");return{from:parseInt(t[0]),to:parseInt(t[1]),line:t[2],label:e}},L=function(e){if(!e)return null;var t=e.from.id,n=e.to.id;return"FOOTWAY"==e.connectionPartType?"".concat(t,"-").concat(n,"-FOOTWAY"):"".concat(t,"-").concat(n,"-").concat(e.label.split("-")[0])},I=function(e){return[e.latitude,e.longitude]},_=function(e){return o.a.createElement("div",{style:s.a.stationSelection},o.a.createElement("div",{style:s.a.stationSelection.labels},y(e)),o.a.createElement("div",{style:s.a.stationSelection.name},e.name))},N=function(e){var t=e.split(",");return[parseFloat(t[0]),parseFloat(t[1])]},R=function(e,t){var n=e.map(function(e){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])}),r=1/0,a=-1;return n.forEach(function(e,t){e<r&&(r=e,a=t)}),a},M=function(e,t,n){for(var r=function(t){var r=e.points.find(function(e){return parseInt(e.ref.id)%1e5==t}),a=n.find(function(e){return e.id==t});if(!r||!a)throw"no correspondence for ".concat(t);var i=N(r.ref.coords);return{latlng:[a.latitude,a.longitude],weird:i}},i=e.paths[0].path.split(" ").map(N),o=function(e,t){var n=[e,t].map(r);if(n.some(function(e){return!e}))return null;var o=[[n[0].weird[0],n[1].weird[0]],[n[0].weird[1],n[1].weird[1]]],c=[[n[0].latlng[0],n[1].latlng[0]],[n[0].latlng[1],n[1].latlng[1]]],s=R(i,n[0].weird),u=R(i,n[1].weird),l=s<u?[s,u]:[u,s],p=i.slice.apply(i,l);return[n[0].weird].concat(Object(a.a)(p),[n[1].weird]).map(function(e){return t=function(e,t){return n=e,r=function(e){var t=function(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}(e);if(0==t)throw"singular matrix";return[[e[1][1]/t,-e[0][1]/t],[-e[1][0]/t,e[0][0]/t]]}(t),[[n[0][0]*r[0][0]+n[0][1]*r[1][0],n[0][0]*r[0][1]+n[0][1]*r[1][1]],[n[1][0]*r[0][0]+n[1][1]*r[1][0],n[1][0]*r[0][1]+n[1][1]*r[1][1]]];var n,r}(c,o),n=e,[[t[0][0]*n[0]+t[0][1]*n[1]],[t[1][0]*n[0]+t[1][1]*n[1]]];var t,n}).map(function(e){return x(e)})},c=[],s=0;s<t.length-1;s++){var u=o.apply(void 0,Object(a.a)(t.slice(s,s+2).map(function(e){return parseInt(e.ref.id)%1e5})));c=c.concat(u)}return c}},187:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(10),a=n(9),i=n.n(a),o=n(47),c=n(24),s=n(25),u=(n(351),n(15)),l=function(){function e(){Object(c.a)(this,e),this.proxyURL="http://localhost:9898/mvg",this.endpoint="".concat(this.proxyURL,"/fahrinfo/api"),this.header={"X-MVG-Authorization-Key":"5af1beca494712ed38d313714d4caff6",Accept:"application/json","Content-Type":"application/json"}}return Object(s.a)(e,[{key:"getDepartureEndpointById",value:function(e){return"".concat(this.endpoint,"/departure/").concat(e,"?footway=0")}},{key:"getStationsEndpoint",value:function(e){return"".concat(this.endpoint,"/location/query?q=").concat(e)}},{key:"getStationsUnrestrictedEndpoint",value:function(e){return"".concat(this.endpoint,"/location/queryWeb?q=").concat(e)}},{key:"getConnectionEndpoint",value:function(e,t){return"".concat(this.endpoint,"/routing/?fromStation=").concat(e,"&toStation=").concat(t)}},{key:"getAllStations",value:function(){var e=Object(o.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getStationsUnrestrictedEndpoint(""),e.prev=1,e.next=4,this.performRequest(t);case 4:if(!(n=e.sent).error){e.next=7;break}return e.abrupt("return",{error:n.error});case 7:return e.abrupt("return",n.locations);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"getConnections",value:function(){var e=Object(o.a)(i.a.mark(function e(t,n){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getConnectionEndpoint(t,n),e.next=3,this.performRequest(r);case 3:if(!(a=e.sent).error&&a.connectionList){e.next=6;break}return e.abrupt("return",a);case 6:return e.abrupt("return",a.connectionList);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDepartureById",value:function(){var e=Object(o.a)(i.a.mark(function e(t){var n,a,o,c,s,u,l=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:-1,a=this.getDepartureEndpointById(t),e.next=4,this.performRequest(a);case 4:if(!(o=e.sent).error){e.next=7;break}return e.abrupt("return",o);case 7:return s=new Date,u=o.departures.filter(function(e){return e.departureTime>=s}),c=n<=0?u:u.slice(0,n),e.abrupt("return",c.map(function(e){return Object(r.a)({},e,{id:t})}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getServingLines",value:function(){var e=Object(o.a)(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getDepartureEndpointById(t),e.next=3,this.performRequest(n);case 3:if(!(r=e.sent).error){e.next=6;break}return e.abrupt("return",r);case 6:return e.abrupt("return",r.servingLines.map(function(e){return{destination:e.destination,line:e.lineNumber,product:e.product}}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getClosestStations",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;return r<=0?[]:n.error?n:n.sort(function(n,r){var a=n.latitude,i=n.longitude,o=r.latitude,c=r.longitude;return u.getDistanceFromLatLonInKm(e,t,a,i)-u.getDistanceFromLatLonInKm(e,t,o,c)}).slice(0,r)}},{key:"performRequest",value:function(e){return fetch(e,{headers:this.header}).then(function(e){return e.ok?e.json():{error:e}})}}]),e}()},19:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"g",function(){return o}),n.d(t,"i",function(){return c}),n.d(t,"h",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return p}),n.d(t,"j",function(){return d}),n.d(t,"l",function(){return f}),n.d(t,"k",function(){return h}),n.d(t,"m",function(){return m});var r="ADD_DESTINATION",a="ADD_DESTINATION_SUCCESS",i="ADD_DESTINATION_FAILED",o="GET_DESTINATION",c="GET_DESTINATION_SUCCESS",s="GET_DESTINATION_FAILED",u="CLEAR_DESTINATION",l="CLEAR_DESTINATION_SUCCESS",p="CLEAR_DESTINATION_FAILED",d="REMOVE_DESTINATION",f="REMOVE_DESTINATION_SUCCESS",h="REMOVE_DESTINATION_FAILED",m="SHOW_DESTINATION_DETAIL"},325:function(e,t,n){e.exports=n(1004)},486:function(e,t,n){e.exports=n(1003)},60:function(e,t,n){"use strict";n.r(t),n.d(t,"DATABASE_URL",function(){return u}),n.d(t,"getDestinations",function(){return f}),n.d(t,"addDestinations",function(){return h}),n.d(t,"removeDestinations",function(){return m}),n.d(t,"clearDestinations",function(){return v}),n.d(t,"setPromise",function(){return g}),n.d(t,"getPromise",function(){return b}),n.d(t,"clearPromise",function(){return y}),n.d(t,"removePromise",function(){return x});var r=n(9),a=n.n(r),i=n(47),o=n(326),c=n.n(o),s=c.a.rest,u="http://localhost:3001",l=c()(),p=s(u);l.configure(p.fetch(window.fetch));var d=l.service("destination"),f=function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.find();case 2:return t=e.sent,console.log("destinations",t),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.create(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("dest id",t),e.next=3,d.remove(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.remove(null,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(e,t){return new Promise(function(n,r){window.localStorage.setItem(e,JSON.stringify(t)),n({key:e,data:t})})},b=function(e){return new Promise(function(t,n){var r=window.localStorage.getItem(e);r||t({});try{t(JSON.parse(r))}catch(a){n(a)}})},y=function(e){return new Promise(function(e,t){e(window.localStorage.clear())})},x=function(e,t){return new Promise(function(n,r){try{var a=JSON.parse(window.localStorage.getItem(e));g(e,a.filter(function(e){return e.id!=t})).then(function(e){return n(e)}).catch(function(e){return r(e)})}catch(i){r(i)}})}},621:function(e,t){},623:function(e,t){},655:function(e,t){},656:function(e,t){},67:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(10),a=n(0),i=n.n(a),o=n(12);function c(e){return i.a.createElement("div",{style:Object(r.a)({},o.a.lineTag,e)},e.line)}},69:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return o});var r="TOGGLE_LOCATION_MODE",a="SET_LOCATION",i="SET_LOCATION_SUCCESS",o="SET_LOCATION_FAILED"},723:function(e,t){},78:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return i});var r="CLOCK_TICK",a="CLOCK_RESET",i="TOGGLE_UPDATE"},827:function(e,t){}},[[486,2,1]]]);
//# sourceMappingURL=main.e272cce3.chunk.js.map